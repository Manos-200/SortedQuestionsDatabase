<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCAA Sorter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
        }
        header {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            text-align: center;
        }
        main {
            padding: 20px;
        }
        .filter-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 0 auto;
        }
        .filter-form label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }
        .filter-form select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg xmlns%3D%22http%3A//www.w3.org/2000/svg%22 viewBox%3D%220 0 4 5%22%3E%3Cpath fill%3D%22%23000%22 d%3D%22M2 0L0 2h4zm0 5L0 3h4z%22/%3E%3C/svg%3E');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 10px;
        }
        .filter-form select:focus {
            outline: none;
            border-color: #007BFF;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }
        .filter-form button {
            width: 100%;
            padding: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .filter-form button:hover {
            background-color: #0056b3;
        }
        .results {
            margin-top: 20px;
            padding: 10px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .result-item {
            margin-bottom: 15px;
        }
        .result-item strong {
            display: block;
            margin-bottom: 5px;
        }
        .divider {
            border: none;
            border-top: 1px solid #ccc;
            margin: 20px 0;
        }
        .result-item-content {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 20px; /* Adds space between the image and the text */
        }

        .result-image {
            max-width: 600px; /* Adjust the size of the image */
            max-height: 600px;
            object-fit: contain; /* Ensures the image doesn't stretch or distort */
        }

        .result-details {
            display: flex;
            flex-direction: column; /* Stack the details vertically */
            justify-content: flex-start;
            text-align: right;
        }
        #descriptor {
            width: 600px;
            white-space: normal;
            word-wrap: break-word;
        }



    </style>
</head>
<body>
    <header>
        <h1>DEMO - Not for actual use just yet :)</h1>
        <p>Filter QCAA Exam Questions by Difficulty and Syllabus Descriptor</p>
    </header>
    <main>
        <form class="filter-form" id="filterForm">
            <label for="unit">Select Unit:</label>
            <select id="unit" name="unit" onchange="populateTopics()">
                <option value="">-- Select Unit --</option>
                <option value="3">Unit 3: Further Calculus</option>
                <option value="4">Unit 4: Further Functions and Statistics</option>
            </select>

            <label for="topic">Select Topic:</label>
            <select id="topic" name="topic" onchange="populateSubtopics()">
                <option value="">-- Select Topic --</option>
            </select>

            <label for="subtopic">Select Subtopic:</label>
            <select id="subtopic" name="subtopic" onchange="populateDescriptors()">
                <option value="">-- Select Subtopic --</option>
            </select>

            <label for="descriptor">Select Syllabus Descriptor:</label>
            <select id="descriptor" name="descriptor">
                <option value="">-- Select Syllabus Descriptor --</option>
            </select>

            <label for="difficulty">Select Difficulty:</label>
            <select id="difficulty" name="difficulty">
                <option value="">-- Select Difficulty --</option>
                <option value="SF">Simple Familiar</option>
                <option value="CF">Complex Familiar</option>
                <option value="CU">Complex Unfamiliar</option>
            </select>
            <label for="tech">Technology:</label>
            <select id="tech" name="tech">
                <option value="">-- Select Technology --</option>
                <option value="TF">Tech Free</option>
                <option value="TA">Tech Active</option>
            </select>


            <button type="button" onclick="filterQuestions()">Filter Questions</button>
        </form>

        <div class="results" id="results">
            <h3>Filtered Results</h3>
            <p>No results to display. Please use the filters above.</p>
        </div>
    </main>

    <script>

    // Sorting syllabus descriptors by unit, topic, and subtopic
const topics = {
    3: [
        {
            value: "3.1", 
            text: "Topic 1: The logarithmic function 2", 
            subtopics: [
                {
                    value: "3.1.1", 
                    text: "Logarithmic laws and logarithmic functions", 
                    descriptors: [
                        {
                            value: "3.1.1.1",
                            text: "establish and use logarithmic laws and definitions"
                        },
                        {
                            value: "3.1.1.2",
                            text: "interpret and use logarithmic scales such as decibels in acoustics, the Richter scale for earthquake magnitude, octaves in music, pH in chemistry"
                        },
                        {
                            value: "3.1.1.3",
                            text: "solve equations involving indices with and without technology"
                        },
                        {
                            value: "3.1.1.4",
                            text: "recognise the qualitative features of the graph of 𝑦 = log𝑎(𝑥) (𝑎 > 1), including asymptotes, and of its translations 𝑦 = log𝑎(𝑥) + 𝑏 and 𝑦 = log𝑎(𝑥 + 𝑐)"
                        },
                        {
                            value: "3.1.1.5",
                            text: "solve equations involving logarithmic functions with and without technology"
                        },
                        {
                            value: "3.1.1.6",
                            text: "identify contexts suitable for modelling by logarithmic functions and use them to solve practical problems; verify and evaluate the usefulness of the model using qualitative statements and quantitative analysis"
                        }
                    ]
                }
            ]
        },
        {
            value: "3.2", 
            text: "Topic 2: Further differentiation and applications 2", 
            subtopics: [
                { 
                    value: "3.2.1", 
                    text: "Calculus of exponential functions", 
                    descriptors: [
                        {
                            value: "3.2.1.1",
                            text: "estimate the limit of (𝑎^ℎ−1)/ℎ as ℎ → 0 using technology, for various values of 𝑎 > 0"
                        },
                        {
                            value: "3.2.1.2",
                            text: "recognise that 𝑒 is the unique number 𝑎 for which the above limit is 1"
                        },
                        {
                            value: "3.2.1.3",
                            text: "define the exponential function 𝑒^x"
                        },
                        {
                            value: "3.2.1.4",
                            text: "establish and use the formula 𝑑/𝑑𝑥(𝑒^𝑥) = 𝑒^𝑥 and 𝑑/𝑑𝑥 𝑒^𝑓(𝑥) = 𝑓′(𝑥)𝑒^𝑓(𝑥)"
                        },
                        {
                            value: "3.2.1.5",
                            text: "identify contexts suitable for mathematical modelling by exponential functions and their derivatives and use the model to solve practical problems; verify and evaluate the usefulness of the model using qualitative statements and quantitative analysis"
                        }
                    ] 
                }, 
                { 
                    value: "3.2.2", 
                    text: "Calculus of logarithmic functions", 
                    descriptors: [
                        {
                            value: "3.2.2.1",
                            text: "define the natural logarithm ln(𝑥) = log𝑒(𝑥)"
                        },
                        {
                            value: "3.2.2.2",
                            text: "recognise and use the inverse relationship of the functions 𝑦 = 𝑒^𝑥 and 𝑦 = ln(𝑥)"
                        },
                        {
                            value: "3.2.2.3",
                            text: "establish and use the formulas 𝑑/𝑑𝑥 (ln(𝑥)) = 1/𝑥 and 𝑑/𝑑𝑥 (ln 𝑓(𝑥)) = 𝑓′(𝑥)/𝑓(𝑥)"
                        },
                        {
                            value: "3.2.2.4",
                            text: "use logarithmic functions and their derivatives to solve practical problems"
                        }
                    ] 
                },
                { 
                    value: "3.2.3", 
                    text: "Calculus of trigonometric functions", 
                    descriptors: [
                        {
                            value: "3.2.3.1",
                            text: "establish the formulas 𝑑/𝑑𝑥 sin(𝑥) = cos(𝑥), and 𝑑/𝑑𝑥 cos(𝑥) = − sin(𝑥) by numerical estimations of the limits and informal proofs based on geometric constructions"
                        },
                        {
                            value: "3.2.3.2",
                            text: "identify contexts suitable for modelling by trigonometric functions and their derivatives and use the model to solve practical problems; verify and evaluate the usefulness of the model using qualitative statements and quantitative analysis"
                        },
                        {
                            value: "3.2.3.3",
                            text: "use trigonometric functions and their derivatives to solve practical problems; including trigonometric functions of the form 𝑦 = sin(𝑓(𝑥)) and 𝑦 = cos(𝑓(𝑥))"
                        }
                    ] 
                },
                { 
                    value: "3.2.4", 
                    text: "Differentiation rules", 
                    descriptors: [
                        {
                            value: "3.2.4.1",
                            text: "select and apply the product rule, quotient rule and chain rule to differentiate functions; express derivatives in simplest and factorised form"
                        }
                    ] 
                }
            ]
        },
        {
            value: "3.3", 
            text: "Topic 3: Integrals", 
            subtopics: [
                { 
                    value: "3.3.1", 
                    text: "Anti-differentiation", 
                    descriptors: [
                        {
                            value: "3.3.1.1",
                            text: "recognise anti-differentiation as the reverse of differentiation"
                        },
                        {
                            value: "3.3.1.2",
                            text: "use the notation ∫ 𝑓(𝑥)𝑑𝑥 for anti-derivatives or indefinite integrals"
                        },
                        {
                            value: "3.3.1.3",
                            text: "establish and use the formula ∫ 𝑥^𝑛 𝑑𝑥 = 1/(𝑛+1) 𝑥^(𝑛+1) + 𝑐 for 𝑛 ≠ -1"
                        },
                        {
                            value: "3.3.1.4",
                            text: "establish and use the formula ∫ 𝑒^𝑥 𝑑𝑥 = 𝑒^𝑥 + 𝑐"
                        },
                        {
                            value: "3.3.1.5",
                            text: "establish and use the formulas ∫ 1/𝑥 𝑑𝑥 = ln(𝑥) + 𝑐, for 𝑥 > 0 and ∫ 1/(𝑎𝑥+𝑏) 𝑑𝑥 = 1/𝑎 ln(𝑎𝑥 + 𝑏) + 𝑐"
                        },
                        {
                            value: "3.3.1.6",
                            text: "establish and use the formulas ∫ sin(𝑥) 𝑑𝑥 = −cos(𝑥) + 𝑐 and ∫ cos(𝑥)𝑑𝑥 = sin(𝑥) + 𝑐"
                        },
                        {
                            value: "3.3.1.7",
                            text: "understand and use the formula for indefinite integrals of the form ∫(𝑓(𝑥) + 𝑔(𝑥))𝑑𝑥 = ∫𝑓(𝑥)𝑑𝑥 + ∫𝑔(𝑥)𝑑𝑥"
                        },
                        {
                            value: "3.3.1.8",
                            text: "determine indefinite integrals of the form ∫𝑓(𝑎𝑥 + 𝑏)𝑑𝑥"
                        },
                        {
                            value: "3.3.1.9",
                            text: "determine 𝑓(𝑥), given 𝑓′(𝑥) and an initial condition 𝑓(𝑎) = 𝑏"
                        },
                        {
                            value: "3.3.1.10",
                            text: "determine the integral of a function using information about the derivative of the given function (integration by recognition)"
                        },
                        {
                            value: "3.3.1.11",
                            text: "determine displacement given velocity in linear motion problems"
                        }
                    ] 
                },
                { 
                    value: "3.3.2", 
                    text: "Fundamental theorem of calculus and definite integrals", 
                    descriptors: [
                        {
                            value: "3.3.2.1",
                            text: "examine the area problem, and use sums of the form ∑𝑖 𝑓(𝑥𝑖)𝛿𝑥𝑖, to estimate the area under the curve 𝑦 = 𝑓(𝑥)"
                        },
                        {
                            value: "3.3.2.2",
                            text: "use the trapezoidal rule for the approximation of the value of a definite integral numerically"
                        },
                        {
                            value: "3.3.2.3",
                            text: "interpret the definite integral ∫ 𝑓(𝑥)𝑑𝑥 as area under the curve 𝑦 = 𝑓(𝑥) if 𝑓(𝑥) > 0"
                        },
                        {
                            value: "3.3.2.4",
                            text: "recognise the definite integral ∫ 𝑓(𝑥)𝑑𝑥 as a limit of sums of the form ∑𝑖 𝑓(𝑥𝑖)𝛿𝑥𝑖"
                        },
                        {
                            value: "3.3.2.5",
                            text: "understand the formula ∫ 𝑓(𝑥)𝑑𝑥 = 𝐹(𝑏) − 𝐹(𝑎) and use it to calculate definite integrals"
                        }
                    ] 
                },
                { 
                    value: "3.3.3", 
                    text: "Applications of integration", 
                    descriptors: [
                        {
                            value: "3.3.3.1",
                            text: "calculate the area under a curve"
                        },
                        {
                            value: "3.3.3.2",
                            text: "calculate total change by integrating instantaneous or marginal rate of change"
                        },
                        {
                            value: "3.3.3.3",
                            text: "calculate the area between curves with and without technology"
                        },
                        {
                            value: "3.3.3.4",
                            text: "determine displacements given acceleration and initial values of displacement and velocity"
                        }
                    ] 
                }
            ]
        }
    ],
    4: [
        {
            value: "4.1", 
            text: "Topic 1: Further differentiation and applications 3", 
            subtopics: [
                { 
                    value: "4.1.1", 
                    text: "The second derivative and applications of differentiation", 
                    descriptors: ["Placeholder Descriptor E"] 
                }
            ]
        },
        {
            value: "4.2", 
            text: "Topic 2: Trigonometric functions 2", 
            subtopics: [
                { 
                    value: "4.2.1", 
                    text: "Cosine and sine rules", 
                    descriptors: ["Placeholder Descriptor F"] 
                }
            ]
        },
        {
            value: "4.3", 
            text: "Topic 3: Discrete random variables 2", 
            subtopics: [
                { 
                    value: "4.3.1", 
                    text: "Bernoulli distributions", 
                    descriptors: ["Placeholder Descriptor G"] 
                },
                { 
                    value: "4.3.2", 
                    text: "Binomial distributions", 
                    descriptors: ["Placeholder Descriptor H"] 
                }
            ]
        },
        {
            value: "4.4", 
            text: "Topic 4: Continuous random variables and the normal distribution", 
            subtopics: [
                { 
                    value: "4.4.1", 
                    text: "General continuous random variables", 
                    descriptors: ["Placeholder Descriptor I"]
                },
                { 
                    value: "4.4.2", 
                    text: "Normal distributions", 
                    descriptors: ["Placeholder Descriptor J"]
                }
            ]
        },
        {
            value: "4.5", 
            text: "Topic 5: Interval estimates for proportions", 
            subtopics: [
                {
                    value: "4.5.1",
                    text: "Random sampling",
                    descriptors: ["Placeholder Descriptor K"]
                },
                {
                    value: "4.5.2",
                    text: "Sampling proportions",
                    descriptors: ["Placeholder Descriptor L"]
                },
                {
                    value: "4.5.3",
                    text: "Confidence intervals for proportions",
                    descriptors: ["Placeholder Descriptor M"]
                }
            ]
        }
    ]
};



        function populateTopics() {
            const unit = document.getElementById('unit').value;
            const topicSelect = document.getElementById('topic');
            topicSelect.innerHTML = '<option value="">-- Select Topic --</option>';

            if (unit && topics[unit]) {
                topics[unit].forEach(topic => {
                    const option = document.createElement('option');
                    option.value = topic.value;
                    option.textContent = topic.text;
                    topicSelect.appendChild(option);
                });
            }

            document.getElementById('subtopic').innerHTML = '<option value="">-- Select Subtopic --</option>';
            document.getElementById('descriptor').innerHTML = '<option value="">-- Select Syllabus Descriptor --</option>';
        }

        function populateSubtopics() {
            const unit = document.getElementById('unit').value;
            const topic = document.getElementById('topic').value;
            const subtopicSelect = document.getElementById('subtopic');

            subtopicSelect.innerHTML = '<option value="">-- Select Subtopic --</option>';

            if (unit && topic && topics[unit]) {
                const selectedTopic = topics[unit].find(t => t.value === topic);
                if (selectedTopic && selectedTopic.subtopics) {
                    selectedTopic.subtopics.forEach(subtopic => {
                        const option = document.createElement('option');
                        option.value = subtopic.value;
                        option.textContent = subtopic.text;
                        subtopicSelect.appendChild(option);
                    });
                }
            }

            document.getElementById('descriptor').innerHTML = '<option value="">-- Select Syllabus Descriptor --</option>';
        }

       function populateDescriptors() {
            const unit = document.getElementById('unit').value;
            const topic = document.getElementById('topic').value;
            const subtopic = document.getElementById('subtopic').value;
            const descriptorSelect = document.getElementById('descriptor');

            descriptorSelect.innerHTML = '<option value="">-- Select Syllabus Descriptor --</option>';

            if (unit && topic && subtopic && topics[unit]) {
                const selectedTopic = topics[unit].find(t => t.value === topic);
                const selectedSubtopic = selectedTopic.subtopics.find(s => s.value === subtopic);
                if (selectedSubtopic && selectedSubtopic.descriptors) {
                    selectedSubtopic.descriptors.forEach(descriptor => {
                        const option = document.createElement('option');
                        option.value = descriptor.value;
                        option.textContent = descriptor.text;
                        descriptorSelect.appendChild(option);
                    });
                }
            }
        }


        function filterQuestions() {
            const unit = document.getElementById('unit').value;
            const topic = document.getElementById('topic').value;
            const subtopic = document.getElementById('subtopic').value;
            const descriptor = document.getElementById('descriptor').value;
            const difficulty = document.getElementById('difficulty').value;
            const tech = document.getElementById('tech').value; // Get the selected technology value

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h3>Filtered Results</h3>';

            fetch('https://manos-200.github.io/SortedQuestionsDatabase/questions.json') // Path to your JSON file
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // Filter the questions based on the selected filters
                    const filteredResults = data.filter(q => 
                        (!unit || q.unit === unit) &&
                        (!topic || q.topic === topic) &&
                        (!subtopic || q.subtopic === subtopic) &&
                        (!descriptor || q.descriptor.includes(descriptor)) &&
                        (!difficulty || q.difficulty === difficulty) &&
                        (!tech || q.tech === tech) // Filter for technology (TF or TA)
                    );

                    // Display the results
                    if (filteredResults.length === 0) {
                        resultsDiv.innerHTML += '<p>No questions match the selected filters.</p>';
                    } else {
                        filteredResults.forEach(q => {
                            const imageUrl = `images/${q.question}.png`;

                            // Create a container for the image and the text side by side
                            resultsDiv.innerHTML += `<div class="result-item">
                                <div class="result-item-content">
                                    <img src="${imageUrl}" alt="Question Image for ${q.question}" 
                                        class="result-image" 
                                        onerror="this.onerror=null; this.src=''; this.alt='Error. Could not load question';">
                                    <div class="result-details">
                                        <strong>Difficulty:</strong> ${q.difficulty} <br>
                                        <strong>Marks:</strong> ${q.marks} <br>
                                        <strong>Technology:</strong> ${q.tech === 'TF' ? 'Tech Free' : 'Tech Active'} <br>
                                        <strong>Descriptor(s):</strong> ${q.descriptor.join(', ')}
                                    </div>
                                </div>
                                <hr class="divider">  <!-- Adding a divider line between results -->
                            </div>`;
                        });
                    }
                })
                .catch(error => {
                    console.error('Error fetching or processing data:', error);
                    resultsDiv.innerHTML += '<p>There was an error loading the questions. Please try again later.</p>';
                });
        }




    </script>
</body>
</html>
